<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MMU Connect Simple Calendar</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 700px;
    margin: 40px auto;
    padding: 0 10px;
    background: #f9f9f9;
  }
  h2 {
    color: purple;
    text-align: center;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }
  th {
    background-color: #b19cd9;
    color: white;
    padding: 10px 0;
  }
  td {
    border: 1px solid #ddd;
    height: 90px;
    vertical-align: top;
    padding: 5px;
    cursor: pointer;
    background: white;
  }
  td:hover {
    background: #f3e8ff;
  }
  .date-number {
    font-weight: bold;
    color: purple;
  }
  .event {
    margin-top: 5px;
    background-color: #8a2be2;
    color: white;
    padding: 2px 5px;
    border-radius: 3px;
    font-size: 0.85em;
  }
  .nav-buttons {
    text-align: center;
    margin-bottom: 15px;
  }
  button {
    background-color: purple;
    color: white;
    border: none;
    padding: 8px 14px;
    margin: 0 10px;
    cursor: pointer;
    border-radius: 5px;
    font-weight: bold;
  }
  button:hover {
    background-color: #5a189a;
  }
  .footer-text {
    text-align: center;
    margin-top: 20px;
    color: #555;
    font-style: italic;
  }
</style>
</head>
<body>

<h2>MMU Connect Calendar</h2>

<div class="nav-buttons">
  <button id="prev-month">&lt; Previous</button>
  <span id="month-year" style="font-weight: bold; font-size: 1.2em; color: purple;"></span>
  <button id="next-month">Next &gt;</button>
</div>

<table>
  <thead>
    <tr>
      <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th>
    </tr>
  </thead>
  <tbody id="calendar-body"></tbody>
</table>

<p class="footer-text">Click any date to add an event.</p>

<script>
  const calendarBody = document.getElementById('calendar-body');
  const monthYear = document.getElementById('month-year');
  const prevBtn = document.getElementById('prev-month');
  const nextBtn = document.getElementById('next-month');

  let currentDate = new Date();
  // Store events in an object with keys like "YYYY-MM-DD" -> array of events
  let events = {};

  function renderCalendar(date) {
    calendarBody.innerHTML = '';

    const year = date.getFullYear();
    const month = date.getMonth();

    // Update month-year header
    const options = { year: 'numeric', month: 'long' };
    monthYear.textContent = date.toLocaleDateString(undefined, options);

    // First day of month
    const firstDay = new Date(year, month, 1);
    // Day of week (0=Sun,...6=Sat)
    const startDay = firstDay.getDay();
    // Days in month
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    // Create blank cells before first day
    let dateNumber = 1;
    for (let week = 0; week < 6; week++) {
      const row = document.createElement('tr');
      for (let day = 0; day < 7; day++) {
        const cell = document.createElement('td');
        if (week === 0 && day < startDay) {
          // Empty cell before start
          cell.innerHTML = '';
        } else if (dateNumber > daysInMonth) {
          // Empty cells after month end
          cell.innerHTML = '';
        } else {
          // Date cell
          cell.innerHTML = `<div class="date-number">${dateNumber}</div>`;

          const key = `${year}-${String(month+1).padStart(2,'0')}-${String(dateNumber).padStart(2,'0')}`;
          if(events[key]) {
            events[key].forEach(ev => {
              const evDiv = document.createElement('div');
              evDiv.className = 'event';
              evDiv.textContent = ev;
              cell.appendChild(evDiv);
            });
          }

          // Add click listener to add event
          cell.addEventListener('click', () => {
            const title = prompt(`Add event for ${key}:`);
            if(title) {
              if(!events[key]) events[key] = [];
              events[key].push(title);
              renderCalendar(currentDate); // Re-render to show new event
            }
          });

          dateNumber++;
        }
        row.appendChild(cell);
      }
      calendarBody.appendChild(row);
    }
  }

  prevBtn.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() -1);
    renderCalendar(currentDate);
  });

  nextBtn.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() +1);
    renderCalendar(currentDate);
  });

  renderCalendar(currentDate);
</script>

</body>
</html>
